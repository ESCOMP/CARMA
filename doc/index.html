<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>CARMA 3.0</title>
	<meta name="generator" content="BBEdit 9.5" />
</head>
<body>
<center>
<h1>Community Aerosol and Radiation Model for Atmospheres</h1>
<h2>Version 3.0</h2>
</center>

<h2>Documentation</h2>
The following documentation is automatically generated from the comments in the
source code by f90doc. It contains a description of all the routines, but doesn't contain
the actual code.

<h3>1) Model Definition</h3>
The model is initialized by using carma_mod.F90, which contains lists of groups, elements,
solutes and gases. This is how the specific microphysical model to be implemented is
described.
<ul>
	<li><a href="f90doc/carma_mod.html">carma_mod.F90</a></li>
	<li><a href="f90doc/carmagroup_mod.html">carmagroup_mod.F90</a></li>
	<li><a href="f90doc/carmaelement_mod.html">carmaelement_mod.F90</a></li>
	<li><a href="f90doc/carmasolute_mod.html">carmasolute_mod.F90</a></li>
	<li><a href="f90doc/carmagas_mod.html">carmagas_mod.F90</a></li>
</ul>

<h3>2) Atmospheric State & Model Execution</h3>
The atmospheric state is captured via the state object. Once the state is entered
and initialized, then the Step method advances the atmospheric state to the next time step.
Multiple threads can be used by creating multiple state objects (one per thread) and initializing
each of them with a different column. See the test example <a href="../tests/carma_test.F90">carma_test.F90</a>
for an example of how to use multiple threads.
<ul>
	<li><a href="f90doc/carmastate_mod.html">carmastate_mod.F90</a></li>
</ul>

<h3>3) Constants, Enumerations, Types & Precision</h3>
<ul>
	<li><a href="f90doc/carma_precision.html">carma_precision.F90</a></li>
	<li><a href="f90doc/carma_constants_mod.html">carma_constants_mod.F90</a></li>
	<li><a href="f90doc/carma_types_mod.html">carma_types_mod.F90</a></li>
	<li><a href="f90doc/carma_enums_mod.html">carma_enums_mod.F90</a></li>
</ul>

<h3>4) Algorithms</h3>
The algortihms look very much like the Fortran 77 code from CARMA 2.3. This was
done to make it easier to transition code to the Fortran 90 framework and so that the
Fortran 90 code would look familiar to CARMA 2.3 developers. The common block variables have
been replaced by structures; however, the file <a href="../source/base/carma_globaer.h">carma_globaer.h</a>
uses macros to map the old common bloack names to the new structure elements. You must
be careful not to try to use the names defined in carma_globaer.h as locally declared variables.
<ul>
	<li><a href="f90doc/actdropl.html">actdropl.F90</a></li>
	<li><a href="f90doc/bhmie.html">bhmie.F90</a></li>
	<li><a href="f90doc/calcrs.html">calcrs.F90</a></li>
	<li><a href="f90doc/coagl.html">coagl.F90</a></li>
	<li><a href="f90doc/coagp.html">coagp.F90</a></li>
	<li><a href="f90doc/csolve.html">csolve.F90</a></li>
	<li><a href="f90doc/detrain.html">detrain.F90</a></li>
	<li><a href="f90doc/downgevapply.html">downgevapply.F90</a></li>
	<li><a href="f90doc/downgxfer.html">downgxfer.F90</a></li>
	<li><a href="f90doc/evap_ingrp.html">evap_ingrp.F90</a></li>
	<li><a href="f90doc/evap_mono.html">evap_mono.F90</a></li>
	<li><a href="f90doc/evap_poly.html">evap_poly.F90</a></li>
	<li><a href="f90doc/evapp.html">evapp.F90</a></li>
	<li><a href="f90doc/freezaerl_koop2000.html">freezaerl_koop2000.F90</a></li>
	<li><a href="f90doc/freezaerl_tabazadeh2000.html">freezaerl_tabazadeh2000.F90</a></li>
	<li><a href="f90doc/freezdropl.html">freezdropl.F90</a></li>
	<li><a href="f90doc/freezglaerl_murray2010.html">freezglaerl_murray2010.F90</a></li>
	<li><a href="f90doc/gasexchange.html">gasexchange.F90</a></li>
	<li><a href="f90doc/growevapl.html">growevapl.F90</a></li>
	<li><a href="f90doc/growp.html">growp.F90</a></li>
	<li><a href="f90doc/gsolve.html">gsolve.F90</a></li>
	<li><a href="f90doc/maxconc.html">maxconc.F90</a></li>
	<li><a href="f90doc/melticel.html">melticel.F90</a></li>
	<li><a href="f90doc/microfast.html">microfast.F90</a></li>
	<li><a href="f90doc/microslow.html">microslow.F90</a></li>
	<li><a href="f90doc/mie.html">mie.F90</a></li>
	<li><a href="f90doc/miess.html">miess.F90</a></li>
	<li><a href="f90doc/newstate.html">newstate.F90</a></li>
	<li><a href="f90doc/nsubsteps.html">nsubsteps.F90</a></li>
	<li><a href="f90doc/pheat.html">pheat.F90</a></li>
	<li><a href="f90doc/planck.html">planck.F90</a></li>
	<li><a href="f90doc/prestep.html">prestep.F90</a></li>
	<li><a href="f90doc/psolve.html">psolve.F90</a></li>
	<li><a href="f90doc/rhoice_heymsfield2010.html">rhoice_heymsfield2010.F90</a></li>
	<li><a href="f90doc/rhopart.html">rhopart.F90</a></li>
	<li><a href="f90doc/setupatm.html">setupatm.F90</a></li>
	<li><a href="f90doc/setupbdif.html">setupbdif.F90</a></li>
	<li><a href="f90doc/setupbins.html">setupbins.F90</a></li>
	<li><a href="f90doc/setupckern.html">setupckern.F90</a></li>
	<li><a href="f90doc/setupcoag.html">setupcoag.F90</a></li>
	<li><a href="f90doc/setupgkern.html">setupgkern.F90</a></li>
	<li><a href="f90doc/setupgrow.html">setupgrow.F90</a></li>
	<li><a href="f90doc/setupnuc.html">setupnuc.F90</a></li>
	<li><a href="f90doc/setupvdry.html">setupvdry.F90</a></li>
	<li><a href="f90doc/setupvf.html">setupvf.F90</a></li>
	<li><a href="f90doc/setupvf_heymsfield2010.html">setupvf_heymsfield2010.F90</a></li>
	<li><a href="f90doc/setupvf_std.html">setupvf_std.F90</a></li>
	<li><a href="f90doc/setupvf_std_shape.html">setupvf_std_shape.F90</a></li>
	<li><a href="f90doc/smallconc.html">smallconc.F90</a></li>
	<li><a href="f90doc/step.html">step.F90</a></li>
	<li><a href="f90doc/supersat.html">supersat.F90</a></li>
	<li><a href="f90doc/totalcondensate.html">totalcondensate.F90</a></li>
	<li><a href="f90doc/tsolve.html">tsolve.F90</a></li>
	<li><a href="f90doc/upgxfer.html">upgxfer.F90</a></li>
	<li><a href="f90doc/vaporp.html">vaporp.F90</a></li>
	<li><a href="f90doc/vaporp_h2o_buck1981.html">vaporp_h2o_buck1981.F90</a></li>
	<li><a href="f90doc/vaporp_h2o_goff1946.html">vaporp_h2o_goff1946.F90</a></li>
	<li><a href="f90doc/vaporp_h2o_murphy2005.html">vaporp_h2o_murphy2005.F90</a></li>
	<li><a href="f90doc/versol.html">versol.F90</a></li>
	<li><a href="f90doc/versub.html">versub.F90</a></li>
	<li><a href="f90doc/vertadv.html">vertadv.F90</a></li>
	<li><a href="f90doc/vertdif.html">vertdif.F90</a></li>
	<li><a href="f90doc/vertical.html">vertical.F90</a></li>
	<li><a href="f90doc/wetr.html">wetr.F90</a></li>
	<li><a href="f90doc/zeromicro.html">zeromicro.F90</a></li>
</ul>

<h3>5) Tests</h3>
The test cases exercise the CARMA code. The tests are located in the tests subdirectory.
Each test creates a file named carma_xxxtest.txt with the results and has a read_xxxtest.pro
IDL file that is used to analyze and plot the test results. The tests can be executed
interactively using run-carma.csh &lt;executable name&gt; or all can be run in batch mode
(without display) using the script run-regress.csh. Standard results for each test are
located in tests/bench.
<ul>
	<li><a href="f90doc/carma_bc2gtest.html">carma_bc2gtest.F90</a></li>
	<li><a href="f90doc/carma_bcoctest.html">carma_bcoctest.F90</a></li>
	<li><a href="f90doc/carma_coagtest.html">carma_coagtest.F90</a></li>
	<li><a href="f90doc/carma_drydeptest.html">carma_drydeptest.F90</a></li>
	<li><a href="f90doc/carma_falltest.html">carma_falltest.F90</a></li>
	<li><a href="f90doc/carma_growtest.html">carma_growtest.F90</a></li>
	<li><a href="f90doc/carma_inittest.html">carma_inittest.F90</a></li>
	<li><a href="f90doc/carma_mietest.html">carma_mietest.F90</a></li>
	<li><a href="f90doc/carma_nuctest.html">carma_nuctest.F90</a></li>
	<li><a href="f90doc/carma_pheattest.html">carma_pheattest.F90</a></li>
	<li><a href="f90doc/carma_scfalltest.html">carma_scfalltest.F90</a></li>
	<li><a href="f90doc/carma_sigmadrydeptest.html">carma_sigmadrydeptest.F90</a></li>
	<li><a href="f90doc/carma_sigmafalltest.html">carma_sigmafalltest.F90</a></li>
	<li><a href="f90doc/carma_swelltest.html">carma_swelltest.F90</a></li>
	<li><a href="f90doc/carma_vdiftest.html">carma_vdiftest.F90</a></li>
</body>
</html>
