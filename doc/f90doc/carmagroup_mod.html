<HTML>
<HEAD>
   <TITLE> module carmagroup_mod (generated by f90doc) </TITLE>
</HEAD>
<H1> Module carmagroup_mod </H1>
<PRE>module carmagroup_mod

        ! Uses
    use <A HREF="carma_precision_mod.html">carma_precision_mod</A>
    use <A HREF="carma_enums_mod.html">carma_enums_mod</A>
    use <A HREF="carma_constants_mod.html">carma_constants_mod</A>
    use <A HREF="carma_types_mod.html">carma_types_mod</A>

        ! Subroutines and functions
    public subroutine <A HREF="carmagroup_mod.html#subroutine_carmagroup_create">CARMAGROUP_Create</A> (carma, igroup, name, rmin, rmrat, ishape, eshape, is_ice, rc, is_fractal, irhswell, irhswcomp, do_mie, do_wetdep, do_drydep, do_vtran, solfac, scavcoef, shortname, cnsttype, maxbin, ifallrtn, is_cloud, rmassmin, imiertn, iopticstype, is_sulfate, dpc_threshold, rmon, df, falpha, neutral_volfrc)
    public subroutine <A HREF="carmagroup_mod.html#subroutine_carmagroup_destroy">CARMAGROUP_Destroy</A> (carma, igroup, rc)
    public subroutine <A HREF="carmagroup_mod.html#subroutine_carmagroup_get">CARMAGROUP_Get</A> (carma, igroup, rc, name, shortname, rmin, rmrat, ishape, eshape, is_ice, is_fractal, irhswell, irhswcomp, cnsttype, r, rlow, rup, dr, rmass, dm, vol, qext, ssa, asym, do_mie, do_wetdep, do_drydep, do_vtran, solfac, scavcoef, ienconc, ncore, icorelem, maxbin, ifallrtn, is_cloud, rmassmin, arat, rrat, rprat, imiertn, iopticstype, is_sulfate, dpc_threshold, rmon, df, nmon, falpha, neutral_volfrc)
    public subroutine <A HREF="carmagroup_mod.html#subroutine_carmagroup_print">CARMAGROUP_Print</A> (carma, igroup, rc)
    private subroutine <A HREF="carmagroup_mod.html#subroutine_carmagroup_set">CARMAGROUP_Set</A> (carma, igroup, rc, qext, ssa, asym)

end module carmagroup_mod
</PRE>
 The CARMAGROUP module contains configuration information about a CARMA partcile.
<P>
 NOTE: Because of the way Fortran handles pointers and allocations, it is much
 simpiler to have these methods directly access the group array that is in the
 CARMA object rather than having this as its own objects. Some compilers (like
 IBM on AIX do not by default automatically deallocate automatically created
 derived types that contain allocations. This can result in memory leaks that
 are difficult to find.
<P>
 These calls are written like they are part of CARMA, but they are called
 CARMAGROUP and kept by themselves in their own file to make it easier to keep
 track of what is required when adding an attribute to a group.
<P>
<STRONG>Author:</STRONG> Chuck Bardeen
<P>
<STRONG>Version:</STRONG> July-2009

<HR><H2> Description of Subroutines and Functions </H2>
<A NAME="subroutine_carmagroup_create"><H3>CARMAGROUP_Create</H3></A>
<PRE>public subroutine CARMAGROUP_Create (carma, igroup, name, rmin, rmrat, ishape, eshape, is_ice, rc, is_fractal, irhswell, irhswcomp, do_mie, do_wetdep, do_drydep, do_vtran, solfac, scavcoef, shortname, cnsttype, maxbin, ifallrtn, is_cloud, rmassmin, imiertn, iopticstype, is_sulfate, dpc_threshold, rmon, df, falpha, neutral_volfrc)
    type (carma_type), intent(inout) :: carma
</PRE>
<DL><DD><DL><DD>
 the carma object
</DL></DL>
<PRE>    integer, intent(in) :: igroup
</PRE>
<DL><DD><DL><DD>
 the group index
</DL></DL>
<PRE>    character (len=*), intent(in) :: name
</PRE>
<DL><DD><DL><DD>
 the group name, maximum of 255 characters
</DL></DL>
<PRE>    real (kind=f), intent(in) :: rmin
</PRE>
<DL><DD><DL><DD>
 the minimum radius, can be specified [cm]
</DL></DL>
<PRE>    real (kind=f), intent(in) :: rmrat
</PRE>
<DL><DD><DL><DD>
 the volume ratio between bins
</DL></DL>
<PRE>    integer, intent(in) :: ishape
</PRE>
<DL><DD><DL><DD>
 the type of the particle shape
</DL></DL>
<PRE>    real (kind=f), intent(in) :: eshape
</PRE>
<DL><DD><DL><DD>
 [I_SPHERE | I_HEXAGON | I_CYLINDER]
 the aspect ratio of the particle shape (length/diameter)
</DL></DL>
<PRE>    logical, intent(in) :: is_ice
</PRE>
<DL><DD><DL><DD>
 is this an ice particle?
</DL></DL>
<PRE>    integer, intent(out) :: rc
</PRE>
<DL><DD><DL><DD>
 return code, negative indicates failure
</DL></DL>
<PRE>    logical, optional, intent(in) :: is_fractal
</PRE>
<DL><DD><DL><DD>
 is this a fractal particle?
</DL></DL>
<PRE>    integer, optional, intent(in) :: irhswell
</PRE>
<DL><DD><DL><DD>
 the parameterization for particle swelling from relative humidity
</DL></DL>
<PRE>    integer, optional, intent(in) :: irhswcomp
</PRE>
<DL><DD><DL><DD>
 [I_FITZGERALD | I_GERBER | I_WTPCT_H2SO4 | I_PETTERS]
 the composition for particle swelling from relative humidity
</DL></DL>
<PRE>    logical, optional, intent(in) :: do_mie
</PRE>
<DL><DD><DL><DD>
 [I_SWG_NH42SO4 | I_SWG_SEA_SALT | I_SWG_URBAN | I_SWG_RURAL]
 do mie calculations?
</DL></DL>
<PRE>    logical, optional, intent(in) :: do_wetdep
</PRE>
<DL><DD><DL><DD>
 do wet deposition for this particle?
</DL></DL>
<PRE>    logical, optional, intent(in) :: do_drydep
</PRE>
<DL><DD><DL><DD>
 do dry deposition for this particle?
</DL></DL>
<PRE>    logical, optional, intent(in) :: do_vtran
</PRE>
<DL><DD><DL><DD>
 do sedimentation for this particle?
</DL></DL>
<PRE>    real (kind=f), optional, intent(in) :: solfac
</PRE>
<DL><DD><DL><DD>
 the solubility factor for wet deposition
</DL></DL>
<PRE>    real (kind=f), optional, intent(in) :: scavcoef
</PRE>
<DL><DD><DL><DD>
 the scavenging coefficient for wet deposition
</DL></DL>
<PRE>    character (len=*), optional, intent(in) :: shortname
</PRE>
<DL><DD><DL><DD>
 the group shortname, maximum of 6 characters
</DL></DL>
<PRE>    integer, optional, intent(in) :: cnsttype
</PRE>
<DL><DD><DL><DD>
 constituent type in parent model
</DL></DL>
<PRE>    integer, optional, intent(in) :: maxbin
</PRE>
<DL><DD><DL><DD>
 [I_CNSTTYPE_PROGNOSTIC | I_CNSTTYPE_DIAGNOSTIC]
 bin number of the last prognostic bin
</DL></DL>
<PRE>    integer, optional, intent(in) :: ifallrtn
</PRE>
<DL><DD><DL><DD>
 the remaining bins are diagnostic
 fall velocity routine [I_FALLRTN_STD
</DL></DL>
<PRE>    logical, optional, intent(in) :: is_cloud
</PRE>
<DL><DD><DL><DD>
 | I_FALLRTN_STD_SHAPE | I_FALLRTN_HEYMSFIELD2010
 | I_FALLRTN_ACKERMAN_DROP | I_FALLRTN_ACKERMAN_ICE]
 is this a cloud particle?
</DL></DL>
<PRE>    real (kind=f), optional, intent(in) :: rmassmin
</PRE>
<DL><DD><DL><DD>
 the minimum mass, when used overrides rmin[g]
</DL></DL>
<PRE>    integer, optional, intent(in) :: imiertn
</PRE>
<DL><DD><DL><DD>
 mie routine [I_MIERTN_TOON1981 | I_MIERTN_BOHREN1983
</DL></DL>
<PRE>    integer, optional, intent(in) :: iopticstype
</PRE>
<DL><DD><DL><DD>
 | I_MIERTN_BOTET1997]
 optics routine [I_OPTICS_FIXED  | I_OPTICS_MIXED_YU2015
</DL></DL>
<PRE>    logical, optional, intent(in) :: is_sulfate
</PRE>
<DL><DD><DL><DD>
 | I_OPTICS_SULFATE_YU2015 | I_OPTICS_MIXED_CORESHELL
 | I_OPTICS_MIXED_VOLUME | I_OPTICS_MIXED_MAXWELL
 | I_OPTICS_SULFATE ]
 is this a sulfate particle?
</DL></DL>
<PRE>    real (kind=f), optional, intent(in) :: dpc_threshold
</PRE>
<DL><DD><DL><DD>
 convergence criteria for particle concentration
</DL></DL>
<PRE>    real (kind=f), optional, intent(in) :: rmon
</PRE>
<DL><DD><DL><DD>
 [fraction]
 monomer radius for fractal particles [cm]
</DL></DL>
<PRE>    real (kind=f), optional, intent(in), dimension (carma%f_NBIN) :: df
</PRE>
<DL><DD><DL><DD>
 fractal dimension
</DL></DL>
<PRE>    real (kind=f), optional, intent(in) :: falpha
</PRE>
<DL><DD><DL><DD>
 fractal packing coefficient
</DL></DL>
<PRE>    real (kind=f), optional, intent(in) :: neutral_volfrc
</PRE>
<DL><DD><DL><DD>
 volume fraction of core mass for neutralization
</DL></DL>
<PRE>end subroutine CARMAGROUP_Create
</PRE>
<A NAME="subroutine_carmagroup_destroy"><H3>CARMAGROUP_Destroy</H3></A>
<PRE>public subroutine CARMAGROUP_Destroy (carma, igroup, rc)
    type (carma_type), intent(inout) :: carma
</PRE>
<DL><DD><DL><DD>
 the carma object
</DL></DL>
<PRE>    integer, intent(in) :: igroup
</PRE>
<DL><DD><DL><DD>
 the group index
</DL></DL>
<PRE>    integer, intent(out) :: rc
</PRE>
<DL><DD><DL><DD>
 return code, negative indicates failure
</DL></DL>
<PRE>end subroutine CARMAGROUP_Destroy
</PRE>
 Deallocates the memory associated with a CARMAGROUP object.
<P>
<STRONG>Author:</STRONG> Chuck Bardeen
<P>
<STRONG>Version:</STRONG> May-2009
<P>
<STRONG>See also:</STRONG> module <A HREF="CARMAGROUP_Create.html">CARMAGROUP_Create</A>
<A NAME="subroutine_carmagroup_get"><H3>CARMAGROUP_Get</H3></A>
<PRE>public subroutine CARMAGROUP_Get (carma, igroup, rc, name, shortname, rmin, rmrat, ishape, eshape, is_ice, is_fractal, irhswell, irhswcomp, cnsttype, r, rlow, rup, dr, rmass, dm, vol, qext, ssa, asym, do_mie, do_wetdep, do_drydep, do_vtran, solfac, scavcoef, ienconc, ncore, icorelem, maxbin, ifallrtn, is_cloud, rmassmin, arat, rrat, rprat, imiertn, iopticstype, is_sulfate, dpc_threshold, rmon, df, nmon, falpha, neutral_volfrc)
    type (carma_type), intent(in) :: carma
</PRE>
<DL><DD><DL><DD>
 the carma object
</DL></DL>
<PRE>    integer, intent(in) :: igroup
</PRE>
<DL><DD><DL><DD>
 the group index
</DL></DL>
<PRE>    integer, intent(out) :: rc
</PRE>
<DL><DD><DL><DD>
 return code, negative indicates failure
</DL></DL>
<PRE>    character (len=*), optional, intent(out) :: name
</PRE>
<DL><DD><DL><DD>
 the group name
</DL></DL>
<PRE>    character (len=*), optional, intent(out) :: shortname
</PRE>
<DL><DD><DL><DD>
 the group short name
</DL></DL>
<PRE>    real (kind=f), optional, intent(out) :: rmin
</PRE>
<DL><DD><DL><DD>
 the minimum radius [cm]
</DL></DL>
<PRE>    real (kind=f), optional, intent(out) :: rmrat
</PRE>
<DL><DD><DL><DD>
 the volume ratio between bins
</DL></DL>
<PRE>    integer, optional, intent(out) :: ishape
</PRE>
<DL><DD><DL><DD>
 the type of the particle shape
</DL></DL>
<PRE>    real (kind=f), optional, intent(out) :: eshape
</PRE>
<DL><DD><DL><DD>
 the aspect ratio of the particle shape
</DL></DL>
<PRE>    logical, optional, intent(out) :: is_ice
</PRE>
<DL><DD><DL><DD>
 is this an ice particle?
</DL></DL>
<PRE>    logical, optional, intent(out) :: is_fractal
</PRE>
<DL><DD><DL><DD>
 is this a fractal?
</DL></DL>
<PRE>    integer, optional, intent(out) :: irhswell
</PRE>
<DL><DD><DL><DD>
 the parameterization for particle swelling
</DL></DL>
<PRE>    integer, optional, intent(out) :: irhswcomp
</PRE>
<DL><DD><DL><DD>
 from relative humidity
 the composition for particle swelling
</DL></DL>
<PRE>    integer, optional, intent(out) :: cnsttype
</PRE>
<DL><DD><DL><DD>
 from relative humidity
 constituent type in the parent model
</DL></DL>
<PRE>    real (kind=f), optional, intent(out), dimension (carma%f_NBIN) :: r
</PRE>
<DL><DD><DL><DD>
 the bin radius [cm]
</DL></DL>
<PRE>    real (kind=f), optional, intent(out), dimension (carma%f_NBIN) :: rlow
</PRE>
<DL><DD><DL><DD>
 the bin radius lower bound [cm]
</DL></DL>
<PRE>    real (kind=f), optional, intent(out), dimension (carma%f_NBIN) :: rup
</PRE>
<DL><DD><DL><DD>
 the bin radius upper bound [cm]
</DL></DL>
<PRE>    real (kind=f), optional, intent(out), dimension (carma%f_NBIN) :: dr
</PRE>
<DL><DD><DL><DD>
 the bin width in radius space [cm]
</DL></DL>
<PRE>    real (kind=f), optional, intent(out), dimension (carma%f_NBIN) :: rmass
</PRE>
<DL><DD><DL><DD>
 the bin mass [g]
</DL></DL>
<PRE>    real (kind=f), optional, intent(out), dimension (carma%f_NBIN) :: dm
</PRE>
<DL><DD><DL><DD>
 the bin width in mass space [g]
</DL></DL>
<PRE>    real (kind=f), optional, intent(out), dimension (carma%f_NBIN) :: vol
</PRE>
<DL><DD><DL><DD>
 the bin volume [cm<sup>3</sup>]
</DL></DL>
<PRE>    real (kind=f), optional, intent(out), dimension (carma%f_NWAVE,carma%f_NBIN) :: qext
</PRE>
<DL><DD><DL><DD>
 (scaled porosity radius / equiv. sphere)
 extinction efficiency
</DL></DL>
<PRE>    real (kind=f), optional, intent(out), dimension (carma%f_NWAVE,carma%f_NBIN) :: ssa
</PRE>
<DL><DD><DL><DD>
 single scattering albedo
</DL></DL>
<PRE>    real (kind=f), optional, intent(out), dimension (carma%f_NWAVE,carma%f_NBIN) :: asym
</PRE>
<DL><DD><DL><DD>
 asymmetry factor
</DL></DL>
<PRE>    logical, optional, intent(out) :: do_mie
</PRE>
<DL><DD><DL><DD>
 do mie calculations?
</DL></DL>
<PRE>    logical, optional, intent(out) :: do_wetdep
</PRE>
<DL><DD><DL><DD>
 do wet deposition for this particle?
</DL></DL>
<PRE>    logical, optional, intent(out) :: do_drydep
</PRE>
<DL><DD><DL><DD>
 do dry deposition for this particle?
</DL></DL>
<PRE>    logical, optional, intent(out) :: do_vtran
</PRE>
<DL><DD><DL><DD>
 do sedimentation for this particle?
</DL></DL>
<PRE>    real (kind=f), optional, intent(out) :: solfac
</PRE>
<DL><DD><DL><DD>
 the solubility factor for wet deposition
</DL></DL>
<PRE>    real (kind=f), optional, intent(out) :: scavcoef
</PRE>
<DL><DD><DL><DD>
 the scavenging coefficient for wet deposition
</DL></DL>
<PRE>    integer, optional, intent(out) :: ienconc
</PRE>
<DL><DD><DL><DD>
 Particle number conc. element for group
</DL></DL>
<PRE>    integer, optional, intent(out) :: ncore
</PRE>
<DL><DD><DL><DD>
 Number of core mass elements for group
</DL></DL>
<PRE>    integer, optional, intent(out), dimension (carma%f_NELEM) :: icorelem
</PRE>
<DL><DD><DL><DD>
 Element index of core mass elements for group
</DL></DL>
<PRE>    integer, optional, intent(out) :: maxbin
</PRE>
<DL><DD><DL><DD>
 the last prognostic bin in the group
</DL></DL>
<PRE>    integer, optional, intent(out) :: ifallrtn
</PRE>
<DL><DD><DL><DD>
 fall velocity routine [I_FALLRTN_STD
</DL></DL>
<PRE>    logical, optional, intent(out) :: is_cloud
</PRE>
<DL><DD><DL><DD>
 | I_FALLRTN_STD_SHAPE | I_FALLRTN_HEYMSFIELD2010
 | I_FALLRTN_ACKERMAN_DROP
 | I_FALLRTN_ACKERMAN_ICE]
 is this a cloud particle?
</DL></DL>
<PRE>    real (kind=f), optional, intent(out) :: rmassmin
</PRE>
<DL><DD><DL><DD>
 the minimum mass [g]
</DL></DL>
<PRE>    real (kind=f), optional, intent(out), dimension (carma%f_NBIN) :: arat
</PRE>
<DL><DD><DL><DD>
 the projected area ratio
</DL></DL>
<PRE>    real (kind=f), optional, intent(out), dimension (carma%f_NBIN) :: rrat
</PRE>
<DL><DD><DL><DD>
 (area / area enclosing sphere)
 the radius ratio
</DL></DL>
<PRE>    real (kind=f), optional, intent(out), dimension (carma%f_NBIN) :: rprat
</PRE>
<DL><DD><DL><DD>
 (maximum dimension / radius of enclosing sphere)
 the porusity radius ratio
</DL></DL>
<PRE>    integer, optional, intent(out) :: imiertn
</PRE>
<DL><DD><DL><DD>
 mie routine [I_MIERTN_TOON1981
</DL></DL>
<PRE>    integer, optional, intent(out) :: iopticstype
</PRE>
<DL><DD><DL><DD>
 | I_MIERTN_BOHREN1983 | I_MIERTN_BOTET1997]
 optics routine [I_OPTICS_FIXED  | I_OPTICS_MIXED_YU2015
</DL></DL>
<PRE>    logical, optional, intent(out) :: is_sulfate
</PRE>
<DL><DD><DL><DD>
 | I_OPTICS_SULFATE_YU2015 | I_OPTICS_MIXED_CORESHELL
 | I_OPTICS_MIXED_VOLUME | I_OPTICS_MIXED_MAXWELL
 | I_OPTICS_SULFATE ]
 is this a sulfate particle?
</DL></DL>
<PRE>    real (kind=f), optional, intent(out) :: dpc_threshold
</PRE>
<DL><DD><DL><DD>
 convergence criteria for particle concentration
</DL></DL>
<PRE>    real (kind=f), optional, intent(out) :: rmon
</PRE>
<DL><DD><DL><DD>
 [fraction]
 monomer radius for fractal particles
</DL></DL>
<PRE>    real (kind=f), optional, intent(out), dimension (carma%f_NBIN) :: df
</PRE>
<DL><DD><DL><DD>
 fractal dimension
</DL></DL>
<PRE>    real (kind=f), optional, intent(out), dimension (carma%f_NBIN) :: nmon
</PRE>
<DL><DD><DL><DD>
 number of monomers per
</DL></DL>
<PRE>    real (kind=f), optional, intent(out) :: falpha
</PRE>
<DL><DD><DL><DD>
 fractal packing coefficient
</DL></DL>
<PRE>    real (kind=f), optional, intent(out) :: neutral_volfrc
</PRE>
<DL><DD><DL><DD>
 volume fraction of core mass for neutralization
</DL></DL>
<PRE>end subroutine CARMAGROUP_Get
</PRE>
 Gets information about a group.
<P>
 The group name and most other properties are available after a call to
 CARMAGROUP_Create(). After a call to CARMA_Initialize(), the bin
 dimensions and optical properties can be retrieved.
<P>
<STRONG>Author:</STRONG> Chuck Bardeen
<P>
<STRONG>Version:</STRONG> May-2009
<P>
<STRONG>See also:</STRONG> module <A HREF="CARMAGROUP_Create.html">CARMAGROUP_Create</A>, module <A HREF="CARMA_GetGroup.html">CARMA_GetGroup</A>, module <A HREF="CARMA_Initialize.html">CARMA_Initialize</A>
<A NAME="subroutine_carmagroup_print"><H3>CARMAGROUP_Print</H3></A>
<PRE>public subroutine CARMAGROUP_Print (carma, igroup, rc)
    type (carma_type), intent(in) :: carma
</PRE>
<DL><DD><DL><DD>
 the carma object
</DL></DL>
<PRE>    integer, intent(in) :: igroup
</PRE>
<DL><DD><DL><DD>
 the group index
</DL></DL>
<PRE>    integer, intent(out) :: rc
</PRE>
<DL><DD><DL><DD>
 return code, negative indicates failure
</DL></DL>
<PRE>    ! Calls: <A HREF="CARMAGROUP_Get.html">CARMAGROUP_Get</A>
end subroutine CARMAGROUP_Print
</PRE>
 Prints information about a group.
<P>
<STRONG>Author:</STRONG> Chuck Bardeen
<P>
<STRONG>Version:</STRONG> May-2009
<P>
<STRONG>See also:</STRONG> module <A HREF="CARMAGROUP_Get.html">CARMAGROUP_Get</A>
<A NAME="subroutine_carmagroup_set"><H3>CARMAGROUP_Set</H3></A>
<PRE>private subroutine CARMAGROUP_Set (carma, igroup, rc, qext, ssa, asym)
    type (carma_type), intent(inout) :: carma
</PRE>
<DL><DD><DL><DD>
 the carma object
</DL></DL>
<PRE>    integer, intent(in) :: igroup
</PRE>
<DL><DD><DL><DD>
 the group index
</DL></DL>
<PRE>    integer, intent(out) :: rc
</PRE>
<DL><DD><DL><DD>
 return code, negative indicates failure
</DL></DL>
<PRE>    real (kind=f), optional, intent(in), dimension (carma%f_NWAVE,carma%f_NBIN) :: qext
</PRE>
<DL><DD><DL><DD>
 extinction efficiency
</DL></DL>
<PRE>    real (kind=f), optional, intent(in), dimension (carma%f_NWAVE,carma%f_NBIN) :: ssa
</PRE>
<DL><DD><DL><DD>
 single scattering albedo
</DL></DL>
<PRE>    real (kind=f), optional, intent(in), dimension (carma%f_NWAVE,carma%f_NBIN) :: asym
</PRE>
<DL><DD><DL><DD>
 asymmetry factor
</DL></DL>
<PRE>end subroutine CARMAGROUP_Set
</PRE>
 Sets information about a group.
<P>
 Group optical properties may not be set by the CARMA initialization and
 may instead be specified by an outside source (e.g. read in from a file).
<P>
<STRONG>Author:</STRONG> Chuck Bardeen
<P>
<STRONG>Version:</STRONG> May-2013
<P>
<STRONG>See also:</STRONG> module <A HREF="CARMAGROUP_Create.html">CARMAGROUP_Create</A>, module <A HREF="CARMA_GetGroup.html">CARMA_GetGroup</A>, module <A HREF="CARMA_Initialize.html">CARMA_Initialize</A>
</HTML>
