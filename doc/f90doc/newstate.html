<HTML>
<HEAD>
   <TITLE> subroutine newstate (generated by f90doc) </TITLE>
</HEAD>
<H1> Subroutine newstate </H1>
<PRE>subroutine newstate

        ! Uses
    use <A HREF="carma_precision_mod.html">carma_precision_mod</A>
    use <A HREF="carma_enums_mod.html">carma_enums_mod</A>
    use <A HREF="carma_constants_mod.html">carma_constants_mod</A>
    use <A HREF="carma_types_mod.html">carma_types_mod</A>
    use <A HREF="carmastate_mod.html">carmastate_mod</A>
    use <A HREF="carma_mod.html">carma_mod</A>

        ! Calls
    call <A HREF="fixcorecol.html">fixcorecol</A>
    call <A HREF="newstate_calc.html">newstate_calc</A>
    call <A HREF="supersat.html">supersat</A>
    call <A HREF="vertical.html">vertical</A>

        ! Variables
    type (carma_type), intent(in) :: <A HREF="newstate.html#var_carma">carma</A>
    type (carmastate_type), intent(inout) :: <A HREF="newstate.html#var_cstate">cstate</A>
    integer, intent(inout) :: <A HREF="newstate.html#var_rc">rc</A>
    real (kind=f), dimension (NZ,NBIN,NELEM) :: <A HREF="newstate.html#var_pc_orig">pc_orig</A>
    real (kind=f), dimension (NZ,NGAS) :: <A HREF="newstate.html#var_gc_orig">gc_orig</A>
    real (kind=f), dimension (NZ) :: <A HREF="newstate.html#var_t_orig">t_orig</A>
    real (kind=f), dimension (NZ) :: <A HREF="newstate.html#var_cldfrc_orig">cldfrc_orig</A>
    real (kind=f), dimension (NZ) :: <A HREF="newstate.html#var_scale_cldfrc">scale_cldfrc</A>
    real (kind=f), dimension (NZ,NBIN,NELEM) :: <A HREF="newstate.html#var_pc_cloudy">pc_cloudy</A>
    real (kind=f), dimension (NZ,NGAS) :: <A HREF="newstate.html#var_gc_cloudy">gc_cloudy</A>
    real (kind=f), dimension (NZ) :: <A HREF="newstate.html#var_t_cloudy">t_cloudy</A>
    real (kind=f), dimension (NZ) :: <A HREF="newstate.html#var_rlheat_cloudy">rlheat_cloudy</A>
    real (kind=f), dimension (NZ) :: <A HREF="newstate.html#var_partheat_cloudy">partheat_cloudy</A>
    real (kind=f), dimension (NZ) :: <A HREF="newstate.html#var_zsubsteps_cloudy">zsubsteps_cloudy</A>
    real (kind=f), dimension (NZ,NBIN,NELEM) :: <A HREF="newstate.html#var_pc_clear">pc_clear</A>
    real (kind=f), dimension (NZ,NGAS) :: <A HREF="newstate.html#var_gc_clear">gc_clear</A>
    real (kind=f), dimension (NZ) :: <A HREF="newstate.html#var_t_clear">t_clear</A>
    real (kind=f), dimension (NZ) :: <A HREF="newstate.html#var_rlheat_clear">rlheat_clear</A>
    real (kind=f), dimension (NZ) :: <A HREF="newstate.html#var_partheat_clear">partheat_clear</A>
    real (kind=f), dimension (NZ) :: <A HREF="newstate.html#var_zsubsteps_clear">zsubsteps_clear</A>
    real (kind=f), dimension (NZ) :: <A HREF="newstate.html#var_scale_threshold">scale_threshold</A>
    integer :: <A HREF="newstate.html#var_igroup">igroup</A>
    integer :: <A HREF="newstate.html#var_igas">igas</A>
    integer :: <A HREF="newstate.html#var_ielem">ielem</A>
    integer :: <A HREF="newstate.html#var_ibin">ibin</A>
    integer :: <A HREF="newstate.html#var_iz">iz</A>

end subroutine newstate
</PRE>
 This routine manages the calculations that update state variables
 of the model with new values at the current simulation time.
<P>
<STRONG>Author:</STRONG> Bardeen
<P>
<STRONG>Version:</STRONG> Jan 2012

<HR><H2> Description of Variables </H2>
<A NAME="var_carma"><H3>carma</H3></A>
<PRE>type (carma_type), intent(in) :: carma
</PRE>
 the carma object
<A NAME="var_cstate"><H3>cstate</H3></A>
<PRE>type (carmastate_type), intent(inout) :: cstate
</PRE>
 the carma state object
<A NAME="var_rc"><H3>rc</H3></A>
<PRE>integer, intent(inout) :: rc
</PRE>
 return code, negative indicates failure
<A NAME="var_pc_orig"><H3>pc_orig</H3></A>
<PRE>real (kind=f), dimension (NZ,NBIN,NELEM) :: pc_orig
</PRE>
<A NAME="var_gc_orig"><H3>gc_orig</H3></A>
<PRE>real (kind=f), dimension (NZ,NGAS) :: gc_orig
</PRE>
<A NAME="var_t_orig"><H3>t_orig</H3></A>
<PRE>real (kind=f), dimension (NZ) :: t_orig
</PRE>
<A NAME="var_cldfrc_orig"><H3>cldfrc_orig</H3></A>
<PRE>real (kind=f), dimension (NZ) :: cldfrc_orig
</PRE>
<A NAME="var_scale_cldfrc"><H3>scale_cldfrc</H3></A>
<PRE>real (kind=f), dimension (NZ) :: scale_cldfrc
</PRE>
<A NAME="var_pc_cloudy"><H3>pc_cloudy</H3></A>
<PRE>real (kind=f), dimension (NZ,NBIN,NELEM) :: pc_cloudy
</PRE>
<A NAME="var_gc_cloudy"><H3>gc_cloudy</H3></A>
<PRE>real (kind=f), dimension (NZ,NGAS) :: gc_cloudy
</PRE>
<A NAME="var_t_cloudy"><H3>t_cloudy</H3></A>
<PRE>real (kind=f), dimension (NZ) :: t_cloudy
</PRE>
<A NAME="var_rlheat_cloudy"><H3>rlheat_cloudy</H3></A>
<PRE>real (kind=f), dimension (NZ) :: rlheat_cloudy
</PRE>
<A NAME="var_partheat_cloudy"><H3>partheat_cloudy</H3></A>
<PRE>real (kind=f), dimension (NZ) :: partheat_cloudy
</PRE>
<A NAME="var_zsubsteps_cloudy"><H3>zsubsteps_cloudy</H3></A>
<PRE>real (kind=f), dimension (NZ) :: zsubsteps_cloudy
</PRE>
<A NAME="var_pc_clear"><H3>pc_clear</H3></A>
<PRE>real (kind=f), dimension (NZ,NBIN,NELEM) :: pc_clear
</PRE>
<A NAME="var_gc_clear"><H3>gc_clear</H3></A>
<PRE>real (kind=f), dimension (NZ,NGAS) :: gc_clear
</PRE>
<A NAME="var_t_clear"><H3>t_clear</H3></A>
<PRE>real (kind=f), dimension (NZ) :: t_clear
</PRE>
<A NAME="var_rlheat_clear"><H3>rlheat_clear</H3></A>
<PRE>real (kind=f), dimension (NZ) :: rlheat_clear
</PRE>
<A NAME="var_partheat_clear"><H3>partheat_clear</H3></A>
<PRE>real (kind=f), dimension (NZ) :: partheat_clear
</PRE>
<A NAME="var_zsubsteps_clear"><H3>zsubsteps_clear</H3></A>
<PRE>real (kind=f), dimension (NZ) :: zsubsteps_clear
</PRE>
<A NAME="var_scale_threshold"><H3>scale_threshold</H3></A>
<PRE>real (kind=f), dimension (NZ) :: scale_threshold
</PRE>
<A NAME="var_igroup"><H3>igroup</H3></A>
<PRE>integer :: igroup
</PRE>
<A NAME="var_igas"><H3>igas</H3></A>
<PRE>integer :: igas
</PRE>
<A NAME="var_ielem"><H3>ielem</H3></A>
<PRE>integer :: ielem
</PRE>
<A NAME="var_ibin"><H3>ibin</H3></A>
<PRE>integer :: ibin
</PRE>
<A NAME="var_iz"><H3>iz</H3></A>
<PRE>integer :: iz
</PRE>
</HTML>
