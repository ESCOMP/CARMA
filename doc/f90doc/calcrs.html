<HTML>
<HEAD>
   <TITLE> subroutine calcrs (generated by f90doc) </TITLE>
</HEAD>
<H1> Subroutine calcrs </H1>
<PRE>subroutine calcrs

        ! Uses
    use <A HREF="carma_precision_mod.html">carma_precision_mod</A>
    use <A HREF="carmastate_mod.html">carmastate_mod</A>
    use <A HREF="carma_enums_mod.html">carma_enums_mod</A>
    use <A HREF="carma_types_mod.html">carma_types_mod</A>
    use <A HREF="carma_mod.html">carma_mod</A>
    use <A HREF="carma_constants_mod.html">carma_constants_mod</A>, only: BK, PI, GRAV

        ! Variables
    type (carma_type), intent(in) :: <A HREF="calcrs.html#var_carma">carma</A>
    type (carmastate_type), intent(in) :: <A HREF="calcrs.html#var_cstate">cstate</A>
    real (kind=f), intent(in) :: <A HREF="calcrs.html#var_ustar">ustar</A>
    real (kind=f), intent(in) :: <A HREF="calcrs.html#var_tmp">tmp</A>
    real (kind=f), intent(in) :: <A HREF="calcrs.html#var_radi">radi</A>
    real (kind=f), intent(in) :: <A HREF="calcrs.html#var_cc">cc</A>
    real (kind=f), intent(in) :: <A HREF="calcrs.html#var_vfall">vfall</A>
    real (kind=f), intent(out) :: <A HREF="calcrs.html#var_rs">rs</A>
    integer, intent(in) :: <A HREF="calcrs.html#var_landidx">landidx</A>
    integer, intent(inout) :: <A HREF="calcrs.html#var_rc">rc</A>
    real (kind=f) :: <A HREF="calcrs.html#var_ebrn">ebrn</A>
    real (kind=f) :: <A HREF="calcrs.html#var_eimp">eimp</A>
    real (kind=f) :: <A HREF="calcrs.html#var_eint">eint</A>
    real (kind=f) :: <A HREF="calcrs.html#var_db">db</A>
    real (kind=f) :: <A HREF="calcrs.html#var_sc">sc</A>
    real (kind=f) :: <A HREF="calcrs.html#var_st">st</A>
    real (kind=f) :: <A HREF="calcrs.html#var_rhoadry">rhoadry</A>
    real (kind=f) :: <A HREF="calcrs.html#var_eta">eta</A>
    real (kind=f), parameter :: <A HREF="calcrs.html#var_xkar">xkar</A> = 0.4_f
    real (kind=f), parameter :: <A HREF="calcrs.html#var_eps0">eps0</A> = 3._f
    real (kind=f) :: <A HREF="calcrs.html#var_lam">lam</A>
    integer :: <A HREF="calcrs.html#var_ibot">ibot</A>

end subroutine calcrs
</PRE>
<UL>
<LI> ----------------------------------------------------------------------
<P>
 Purpose: Calculating the surface resistance, using the PBL parameter.
<P>
 Method: Zhang(2001), Atmospheric Environment
<P>
<STRONG>Author:</STRONG> Tianyi Fan
<P>
<STRONG>Version:</STRONG> Nov-2010
</UL>

<HR><H2> Description of Variables </H2>
<A NAME="var_carma"><H3>carma</H3></A>
<PRE>type (carma_type), intent(in) :: carma
</PRE>
 the carma object
<A NAME="var_cstate"><H3>cstate</H3></A>
<PRE>type (carmastate_type), intent(in) :: cstate
</PRE>
 the carma state object
<A NAME="var_ustar"><H3>ustar</H3></A>
<PRE>real (kind=f), intent(in) :: ustar
</PRE>
 friction velocity [cm/s]
<A NAME="var_tmp"><H3>tmp</H3></A>
<PRE>real (kind=f), intent(in) :: tmp
</PRE>
 temperature [K]
<A NAME="var_radi"><H3>radi</H3></A>
<PRE>real (kind=f), intent(in) :: radi
</PRE>
 radius of the constitutent [cm]
<A NAME="var_cc"><H3>cc</H3></A>
<PRE>real (kind=f), intent(in) :: cc
</PRE>
 slip correction factor
<A NAME="var_vfall"><H3>vfall</H3></A>
<PRE>real (kind=f), intent(in) :: vfall
</PRE>
 gravitational settling velocity, [cm/s]
<A NAME="var_rs"><H3>rs</H3></A>
<PRE>real (kind=f), intent(out) :: rs
</PRE>
 surface resistance [s/cm]
<A NAME="var_landidx"><H3>landidx</H3></A>
<PRE>integer, intent(in) :: landidx
</PRE>
 landscape index, 1=land, 2=ocean, 3=sea ice
<A NAME="var_rc"><H3>rc</H3></A>
<PRE>integer, intent(inout) :: rc
</PRE>
 return code, negative indicates failure
<A NAME="var_ebrn"><H3>ebrn</H3></A>
<PRE>real (kind=f) :: ebrn
</PRE>
<A NAME="var_eimp"><H3>eimp</H3></A>
<PRE>real (kind=f) :: eimp
</PRE>
<A NAME="var_eint"><H3>eint</H3></A>
<PRE>real (kind=f) :: eint
</PRE>
<A NAME="var_db"><H3>db</H3></A>
<PRE>real (kind=f) :: db
</PRE>
<A NAME="var_sc"><H3>sc</H3></A>
<PRE>real (kind=f) :: sc
</PRE>
<A NAME="var_st"><H3>st</H3></A>
<PRE>real (kind=f) :: st
</PRE>
<A NAME="var_rhoadry"><H3>rhoadry</H3></A>
<PRE>real (kind=f) :: rhoadry
</PRE>
<A NAME="var_eta"><H3>eta</H3></A>
<PRE>real (kind=f) :: eta
</PRE>
<A NAME="var_xkar"><H3>xkar</H3></A>
<PRE>real (kind=f), parameter :: xkar = 0.4_f
</PRE>
<A NAME="var_eps0"><H3>eps0</H3></A>
<PRE>real (kind=f), parameter :: eps0 = 3._f
</PRE>
<A NAME="var_lam"><H3>lam</H3></A>
<PRE>real (kind=f) :: lam
</PRE>
<A NAME="var_ibot"><H3>ibot</H3></A>
<PRE>integer :: ibot
</PRE>
</HTML>
