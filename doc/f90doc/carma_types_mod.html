<HTML>
<HEAD>
   <TITLE> module carma_types_mod (generated by f90doc) </TITLE>
</HEAD>
<H1> Module carma_types_mod </H1>
<PRE>module carma_types_mod

        ! Uses
    use <A HREF="carma_precision_mod.html">carma_precision_mod</A>
    use <A HREF="carma_constants_mod.html">carma_constants_mod</A>

        ! Types
    public type <A HREF="carma_types_mod.html#type_carmaelement_type">carmaelement_type</A>
    public type <A HREF="carma_types_mod.html#type_carmagas_type">carmagas_type</A>
    public type <A HREF="carma_types_mod.html#type_carmagroup_type">carmagroup_type</A>
    public type <A HREF="carma_types_mod.html#type_carmasolute_type">carmasolute_type</A>
    public type <A HREF="carma_types_mod.html#type_carma_type">carma_type</A>
    public type <A HREF="carma_types_mod.html#type_carmastate_type">carmastate_type</A>

end module carma_types_mod
</PRE>
 This module defines types used in the CARMA module. The types need to be defined here
 to avoid circular references between different modules (e.g. carma_mod and
 carmastate_mod).
<P>
 NOTE: All the field members are prefixed by f_. This is done because of the macros that
 are used to map between the older F77 common block names for variables to the newer F90
 structure member names for the fields. This is done in carma_globaer.h to keep the core
 CARMA code looking similar to the F77 code to make it easier for scientists with CARMA
 experience to port their code.  Some compilers (e.g Portland Group) have preprocessors
 that will fail to handle the macros in carma_globaer.h properly resulting in recursion
 errors during compiling. By making the field member name different, the recursion
 problems should be avoided.
<P>
<STRONG>Author:</STRONG> Chuck Bardeen
<P>
<STRONG>Version:</STRONG> July-2009

<HR><H2> Description of Types </H2>
<A NAME="type_carmaelement_type"><H3>carmaelement_type</H3></A>
<PRE>public type carmaelement_type
    character (len=CARMA_NAME_LEN) :: f_name
    character (len=CARMA_SHORT_NAME_LEN) :: f_shortname
    real (kind=f) :: f_kappa
    real (kind=f), allocatable, dimension(:) :: f_rho
    complex (kind=f), allocatable, dimension(:,:) :: f_refidx
    integer :: f_igroup
    integer :: f_itype
    integer :: f_icomposition
    integer :: f_isolute
    logical :: f_isShell
end type carmaelement_type
</PRE>
 The CARMAELEMENT data type represents one of the components of a cloud or aerosol particle.
<P>
 The procedure for adding a variable to the CARMAELEMENT data type is:
  <UL>
  <LI>  Add the variable as a scalar or allocatable in the type definition.
  <LI>  If the new variable is dynamic,
    <UL>
    <LI>  Allocate the variable in the appropriate create or initialization routine.
    <LI>  Deallocate the variable in the approprate finalize and destroy routines.
    </UL>
  <LI>  Add an alias for the variable to carma_globaer.h and associate it with the variable
     in this typedef.
<P>
  </UL>
 NOTE: While the carmaelement_type is public, routines outside of the CARMA module should not look
 at or manuipulate fields of this structure directly. There should be CARMAELEMENT_XXX methods
 to do anything that is needed with this structure, and use of these methods will allow
 the CARMAELEMENT data type structure to evolve without impacting code in the parent model.
 The contents of the structure had to be made public, since the CARMA microphysics
 routines are implemented in separate files outside of this model; however, logically
 they are part of the model and are the only routines outside of this module that should
 access fields of this structure directly.
<A NAME="type_carmagas_type"><H3>carmagas_type</H3></A>
<PRE>public type carmagas_type
    character (len=CARMA_NAME_LEN) :: f_name
    character (len=CARMA_SHORT_NAME_LEN) :: f_shortname
    real (kind=f) :: f_wtmol
    integer :: f_ivaprtn
    integer :: f_icomposition
    real (kind=f) :: f_dgc_threshold
    real (kind=f) :: f_ds_threshold
    complex (kind=f), allocatable, dimension(:,:) :: f_refidx
end type carmagas_type
</PRE>
 The CARMAGAS data type represents a gas.
<P>
 The procedure for adding a variable to the CARMAGAS data type is:
  <UL>
  <LI>  Add the variable as a scalar or allocatable in the type definition.
  <LI>  If the new variable is dynamic,
    <UL>
    <LI>  Allocate the variable in the appropriate create or initialization routine.
    <LI>  Deallocate the variable in the approprate finalize and destroy routines.
    </UL>
  <LI>  Add an alias for the variable to carma_globaer.h and associate it with the variable
     in this typedef.
<P>
  </UL>
 NOTE: While the carmagas_type is public, routines outside of the CARMA module should not look
 at or manuipulate fields of this structure directly. There should be CARMAGAS_XXX methods
 to do anything that is needed with this structure, and use of these methods will allow
 the CARMAGAS data type structure to evolve without impacting code in the parent model.
 The contents of the structure had to be made public, since the CARMA microphysics
 routines are implemented in separate files outside of this model; however, logically
 they are part of the model and are the only routines outside of this module that should
 access fields of this structure directly.
<A NAME="type_carmagroup_type"><H3>carmagroup_type</H3></A>
<PRE>public type carmagroup_type
    character (len=CARMA_NAME_LEN) :: f_name
    character (len=CARMA_SHORT_NAME_LEN) :: f_shortname
    integer :: f_cnsttype
    integer :: f_maxbin
    integer :: f_nelem
    integer :: f_ncore
    integer :: f_ishape
    integer :: f_ienconc
    integer :: f_imomelem
    real (kind=f) :: f_solfac
    real (kind=f) :: f_scavcoef
    logical :: f_if_sec_mom
    logical :: f_is_fractal
    logical :: f_is_ice
    logical :: f_is_cloud
    logical :: f_is_sulfate
    logical :: f_do_mie
    logical :: f_do_wetdep
    logical :: f_grp_do_drydep
    logical :: f_grp_do_vtran
    integer :: f_irhswell
    integer :: f_irhswcomp
    integer :: f_ifallrtn
    integer :: f_imiertn
    integer :: f_iopticstype
    real (kind=f) :: f_rmin
    real (kind=f) :: f_rmassmin
    real (kind=f) :: f_rmrat
    real (kind=f) :: f_eshape
    real (kind=f), allocatable, dimension(:) :: f_r
    real (kind=f), allocatable, dimension(:) :: f_rmass
    real (kind=f), allocatable, dimension(:) :: f_vol
    real (kind=f), allocatable, dimension(:) :: f_dr
    real (kind=f), allocatable, dimension(:) :: f_dm
    real (kind=f), allocatable, dimension(:) :: f_rmassup
    real (kind=f), allocatable, dimension(:) :: f_rup
    real (kind=f), allocatable, dimension(:) :: f_rlow
    real (kind=f), allocatable, dimension(:,:) :: f_qext
    real (kind=f), allocatable, dimension(:,:) :: f_ssa
    real (kind=f), allocatable, dimension(:,:) :: f_asym
    integer, allocatable, dimension(:) :: f_icorelem
    real (kind=f), allocatable, dimension(:) :: f_arat
    real (kind=f), allocatable, dimension(:) :: f_rrat
    real (kind=f), allocatable, dimension(:) :: f_rprat
    real (kind=f) :: f_dpc_threshold
    real (kind=f) :: f_rmon
    real (kind=f), allocatable, dimension(:) :: f_df
    real (kind=f), allocatable, dimension(:) :: f_nmon
    real (kind=f) :: f_falpha
    real (kind=f) :: f_neutral_volfrc
end type carmagroup_type
</PRE>
 The CARMAGROUP data type represents a cloud or aerosol partcile.
<P>
 The procedure for adding a variable to the CARMAGROUP data type is:
  <UL>
  <LI>  Add the variable as a scalar or allocatable in the type definition.
  <LI>  If the new variable is dynamic,
    <UL>
    <LI>  Allocate the variable in the appropriate create or initialization routine.
    <LI>  Deallocate the variable in the approprate finalize and destroy routines.
    </UL>
  <LI>  Add an alias for the variable to carma_globaer.h and associate it with the variable
     in this typedef.
<P>
  </UL>
 NOTE: While the carmagroup_type is public, routines outside of the CARMA module should not look
 at or manuipulate fields of this structure directly. There should be CARMAGROUP_XXX methods
 to do anything that is needed with this structure, and use of these methods will allow
 the CARMAGROUP data type structure to evolve without impacting code in the parent model.
 The contents of the structure had to be made public, since the CARMA microphysics
 routines are implemented in separate files outside of this model; however, logically
 they are part of the model and are the only routines outside of this module that should
 access fields of this structure directly.
<A NAME="type_carmasolute_type"><H3>carmasolute_type</H3></A>
<PRE>public type carmasolute_type
    character (len=CARMA_NAME_LEN) :: f_name
    character (len=CARMA_SHORT_NAME_LEN) :: f_shortname
    integer :: f_ions
    real (kind=f) :: f_wtmol
    real (kind=f) :: f_rho
end type carmasolute_type
</PRE>
 The CARMASOLUTE data type represents a gas.
<P>
 The procedure for adding a variable to the CARMASOLUTE data type is:
  <UL>
  <LI>  Add the variable as a scalar or allocatable in the type definition.
  <LI>  If the new variable is dynamic,
    <UL>
    <LI>  Allocate the variable in the appropriate create or initialization routine.
    <LI>  Deallocate the variable in the approprate finalize and destroy routines.
    </UL>
  <LI>  Add an alias for the variable to carma_globaer.h and associate it with the variable
     in this typedef.
<P>
  </UL>
 NOTE: While the carmagas_type is public, routines outside of the CARMA module should not look
 at or manuipulate fields of this structure directly. There should be CARMASOLUTE_XXX methods
 to do anything that is needed with this structure, and use of these methods will allow
 the CARMASOLUTE data type structure to evolve without impacting code in the parent model.
 The contents of the structure had to be made public, since the CARMA microphysics
 routines are implemented in separate files outside of this model; however, logically
 they are part of the model and are the only routines outside of this module that should
 access fields of this structure directly.
<A NAME="type_carma_type"><H3>carma_type</H3></A>
<PRE>public type carma_type
    integer :: f_NGROUP
    integer :: f_NELEM
    integer :: f_NBIN
    integer :: f_NGAS
    integer :: f_NSOLUTE
    integer :: f_NWAVE
    integer :: f_NREFIDX
    integer :: f_LUNOPRT
    logical :: f_do_print
    type (carmaelement_type), allocatable, dimension(:) :: f_element
    type (carmagas_type), allocatable, dimension(:) :: f_gas
    type (carmagroup_type), allocatable, dimension(:) :: f_group
    type (carmasolute_type), allocatable, dimension(:) :: f_solute
    logical :: f_do_vdiff
    logical :: f_do_drydep
    logical :: f_do_coag
    logical :: f_do_detrain
    logical :: f_do_fixedinit
    logical :: f_do_grow
    logical :: f_do_coremasscheck
    logical :: f_do_clearsky
    logical :: f_do_incloud
    logical :: f_do_vtran
    logical :: f_do_explised
    logical :: f_do_partialinit
    logical :: f_do_pheat
    logical :: f_do_pheatatm
    logical :: f_do_print_init
    logical :: f_do_step
    logical :: f_do_substep
    logical :: f_do_thermo
    logical :: f_do_cnst_rlh
    logical, allocatable, dimension(:,:) :: f_if_nuc
    real (kind=f) :: f_conmax
    integer :: f_igash2o
    integer :: f_igash2so4
    integer :: f_igasso2
    integer :: f_maxsubsteps
    integer :: f_minsubsteps
    integer :: f_maxretries
    integer :: f_ifall
    integer :: f_icoagop
    integer :: f_icollec
    integer :: f_itbnd_pc
    integer :: f_ibbnd_pc
    integer, allocatable, dimension(:) :: f_inucgas
    integer, allocatable, dimension(:) :: f_igrowgas
    integer, allocatable, dimension(:) :: f_nnuc2elem
    integer, allocatable, dimension(:) :: f_ievp2elem
    integer, allocatable, dimension(:) :: f_nnucelem
    integer, allocatable, dimension(:,:) :: f_icoag
    integer, allocatable, dimension(:,:) :: f_inucproc
    integer, allocatable, dimension(:,:) :: f_inuc2elem
    integer, allocatable, dimension(:,:) :: f_icoagelem
    integer, allocatable, dimension(:,:) :: f_icoagelem_cm
    integer, allocatable, dimension(:,:) :: f_inucelem
    integer, allocatable, dimension(:,:,:) :: f_inuc2bin
    integer, allocatable, dimension(:,:,:) :: f_ievp2bin
    integer, allocatable, dimension(:,:,:) :: f_nnucbin
    integer, allocatable, dimension(:,:,:,:) :: f_inucbin
    real (kind=f) :: f_dt_threshold
    real (kind=f) :: f_tstick
    real (kind=f) :: f_gsticki
    real (kind=f) :: f_gstickl
    real (kind=f) :: f_cstick
    real (kind=f), allocatable, dimension(:,:,:,:) :: f_diffmass
    real (kind=f) :: f_ck0
    real (kind=f) :: f_grav_e_coll0
    real (kind=f), allocatable, dimension(:,:,:,:,:) :: f_volx
    integer, allocatable, dimension(:,:,:) :: f_ilow
    integer, allocatable, dimension(:,:,:) :: f_jlow
    integer, allocatable, dimension(:,:,:) :: f_iup
    integer, allocatable, dimension(:,:,:) :: f_jup
    integer, allocatable, dimension(:,:) :: f_npairl
    integer, allocatable, dimension(:,:) :: f_npairu
    integer, allocatable, dimension(:,:,:,:,:) :: f_kbin
    real (kind=f), allocatable, dimension(:,:,:,:,:,:) :: f_pkernel
    logical, allocatable, dimension(:,:) :: f_use_ccd
    integer, allocatable, dimension(:,:,:) :: f_iglow
    integer, allocatable, dimension(:,:,:) :: f_jglow
    integer, allocatable, dimension(:,:,:) :: f_igup
    integer, allocatable, dimension(:,:,:) :: f_jgup
    real (kind=f) :: f_vf_const
    real (kind=f), allocatable, dimension(:,:) :: f_rlh_nuc
    real (kind=f), allocatable, dimension(:,:,:) :: f_pratt
    real (kind=f), allocatable, dimension(:,:,:) :: f_prat
    real (kind=f), allocatable, dimension(:,:) :: f_pden1
    real (kind=f), allocatable, dimension(:,:) :: f_palr
    real (kind=f), allocatable, dimension(:) :: f_wave
    real (kind=f), allocatable, dimension(:) :: f_dwave
    logical, allocatable, dimension(:) :: f_do_wave_emit
    character (len=10) :: sulfnucl_method = 'NONE'
end type carma_type
</PRE>
 The CARMA data type replaces the common blocks that were used in the F77 version of
 CARMA. This allows the code to be written to allow for multiple threads to call CARMA
 routines simulataneously. This thread safety is necessary for to run CARMA under OPEN/MP.
<P>
 The procedure for adding a variable to the CARMA data type is:
  <UL>
  <LI>  Add the variable as a scalar or allocatable in the type definition.
  <LI>  If the new variable is dynamic,
    <UL>
    <LI>  Allocate the variable in the appropriate create or initialization routine.
    <LI>  Deallocate the variable in the approprate finalize and destroy routines.
    </UL>
  <LI>  Add an alias for the variable to carma_globaer.h and associate it with the variable
     in this typedef.
<P>
  </UL>
 NOTE: While the carmatype is public, routines outside of the CARMA module should not look
 at or manuipulate fields of this structure directly. There should be CARMA_XXX methods
 to do anything that is needed with this structure, and use of these methods will allow
 the CARMA data type structure to evolve without impacting code in the parent model.
 The contents of the structure had to be made public, since the CARMA microphysics
 rountines are implemented in separate files outside of this model; however, logically
 they are part of the model and are the only routines outside of this module that should
 access fields of this structure directly.
<A NAME="type_carmastate_type"><H3>carmastate_type</H3></A>
<PRE>public type carmastate_type
    type (carma_type), pointer :: f_carma
    integer :: f_NZ
    integer :: f_NZP1
    real (kind=f) :: f_time
    real (kind=f) :: f_dtime
    real (kind=f) :: f_dtime_orig
    real (kind=f) :: f_nretries
    integer :: f_max_nsubstep
    real (kind=f) :: f_max_nretry
    real (kind=f) :: f_nstep
    integer :: f_nsubstep
    real (kind=f) :: f_nretry
    real (kind=f), allocatable, dimension(:) :: f_zsubsteps
    integer :: f_igridv
    real (kind=f), allocatable, dimension(:) :: f_zmet
    real (kind=f), allocatable, dimension(:) :: f_zmetl
    real (kind=f) :: f_xc
    real (kind=f) :: f_yc
    real (kind=f), allocatable, dimension(:) :: f_zc
    real (kind=f), allocatable, dimension(:) :: f_dz
    real (kind=f), allocatable, dimension(:) :: f_zl
    real (kind=f), allocatable, dimension(:,:,:) :: f_rhop
    real (kind=f), allocatable, dimension(:,:,:) :: f_rhop_wet
    real (kind=f), allocatable, dimension(:,:,:) :: f_r_wet
    real (kind=f), allocatable, dimension(:,:,:) :: f_rlow_wet
    real (kind=f), allocatable, dimension(:,:,:) :: f_rup_wet
    real (kind=f), allocatable, dimension(:,:,:) :: f_r_ref
    real (kind=f), allocatable, dimension(:,:,:) :: f_rhop_ref
    real (kind=f), allocatable, dimension(:,:,:) :: f_pc
    real (kind=f), allocatable, dimension(:,:,:) :: f_pcd
    real (kind=f), allocatable, dimension(:,:) :: f_pc_surf
    real (kind=f), allocatable, dimension(:,:) :: f_sedimentationflux
    real (kind=f), allocatable, dimension(:,:) :: f_gc
    real (kind=f), allocatable, dimension(:) :: f_cldfrc
    real (kind=f), allocatable, dimension(:) :: f_rhcrit
    real (kind=f), allocatable, dimension(:,:,:) :: f_pcl
    real (kind=f), allocatable, dimension(:,:) :: f_gcl
    real (kind=f), allocatable, dimension(:,:) :: f_d_gc
    real (kind=f), allocatable, dimension(:) :: f_d_t
    real (kind=f), allocatable, dimension(:,:) :: f_dpc_sed
    real (kind=f), allocatable, dimension(:,:) :: f_pconmax
    real (kind=f), allocatable, dimension(:,:,:) :: f_coaglg
    real (kind=f), allocatable, dimension(:,:,:) :: f_coagpe
    real (kind=f), allocatable, dimension(:,:,:) :: f_rnuclg
    real (kind=f), allocatable, dimension(:,:) :: f_rnucpe
    real (kind=f), allocatable, dimension(:,:) :: f_rhompe
    real (kind=f), allocatable, dimension(:,:,:) :: f_pc_nucl
    real (kind=f), allocatable, dimension(:,:) :: f_growpe
    real (kind=f), allocatable, dimension(:,:) :: f_evappe
    real (kind=f) :: f_coreavg
    real (kind=f) :: f_coresig
    real (kind=f) :: f_evdrop
    real (kind=f), allocatable, dimension(:) :: f_evcore
    real (kind=f), allocatable, dimension(:,:) :: f_growlg
    real (kind=f), allocatable, dimension(:,:) :: f_evaplg
    real (kind=f), allocatable, dimension(:) :: f_gasprod
    real (kind=f), allocatable, dimension(:) :: f_rlheat
    real (kind=f), allocatable, dimension(:,:) :: f_ftoppart
    real (kind=f), allocatable, dimension(:,:) :: f_fbotpart
    real (kind=f), allocatable, dimension(:,:) :: f_pc_topbnd
    real (kind=f), allocatable, dimension(:,:) :: f_pc_botbnd
    real (kind=f), allocatable, dimension(:,:) :: f_cmf
    logical, allocatable, dimension(:,:) :: f_totevap
    logical :: f_too_small
    logical :: f_too_big
    logical :: f_nuc_small
    real (kind=f) :: f_rlprod
    real (kind=f), allocatable, dimension(:,:,:) :: f_kappahygro
    real (kind=f), allocatable, dimension(:,:,:,:,:) :: f_ckernel
    real (kind=f), allocatable, dimension(:,:,:) :: f_bpm
    real (kind=f), allocatable, dimension(:,:,:) :: f_vf
    real (kind=f), allocatable, dimension(:,:,:) :: f_re
    real (kind=f), allocatable, dimension(:,:,:) :: f_dkz
    real (kind=f), allocatable, dimension(:,:) :: f_vd
    real (kind=f), allocatable, dimension(:) :: f_rhoa
    real (kind=f), allocatable, dimension(:) :: f_rhoa_wet
    real (kind=f), allocatable, dimension(:) :: f_t
    real (kind=f), allocatable, dimension(:) :: f_p
    real (kind=f), allocatable, dimension(:) :: f_pl
    real (kind=f), allocatable, dimension(:) :: f_rmu
    real (kind=f), allocatable, dimension(:) :: f_thcond
    real (kind=f), allocatable, dimension(:,:,:) :: f_thcondnc
    real (kind=f), allocatable, dimension(:) :: f_told
    real (kind=f), allocatable, dimension(:) :: f_relhum
    real (kind=f), allocatable, dimension(:) :: f_wtpct
    real (kind=f), allocatable, dimension(:,:) :: f_diffus
    real (kind=f), allocatable, dimension(:,:) :: f_rlhe
    real (kind=f), allocatable, dimension(:,:) :: f_rlhm
    real (kind=f), allocatable, dimension(:,:) :: f_pvapl
    real (kind=f), allocatable, dimension(:,:) :: f_pvapi
    real (kind=f), allocatable, dimension(:) :: f_surfctwa
    real (kind=f), allocatable, dimension(:) :: f_surfctiw
    real (kind=f), allocatable, dimension(:) :: f_surfctia
    real (kind=f), allocatable, dimension(:,:) :: f_akelvin
    real (kind=f), allocatable, dimension(:,:) :: f_akelvini
    real (kind=f), allocatable, dimension(:,:,:) :: f_ft
    real (kind=f), allocatable, dimension(:,:,:) :: f_gro
    real (kind=f), allocatable, dimension(:,:,:) :: f_gro1
    real (kind=f), allocatable, dimension(:,:) :: f_gro2
    real (kind=f), allocatable, dimension(:,:) :: f_supsatl
    real (kind=f), allocatable, dimension(:,:) :: f_supsati
    real (kind=f), allocatable, dimension(:,:) :: f_supsatlold
    real (kind=f), allocatable, dimension(:,:) :: f_supsatiold
    real (kind=f), allocatable, dimension(:,:,:) :: f_scrit
    real (kind=f), allocatable, dimension(:,:) :: f_radint
    real (kind=f), allocatable, dimension(:) :: f_partheat
    real (kind=f), allocatable, dimension(:,:,:) :: f_dtpart
    real (kind=f) :: f_phprod
end type carmastate_type
</PRE>
 The cstate data type replaces portions of the common blocks that were used
 in the F77 version of CARMA. This allows the code to be written to allow for
 multiple threads to call CARMA routines simulataneously. This thread safety is
 necessary for to run CARMA under OPEN/MP.
<P>
 The procedure for adding a variable to the cstate data type is:
  <UL>
  <LI>  Add the variable as a scalar or allocatable in the type definition.
  <LI>  If the new variable is dynamic,
    <UL>
    <LI>  Allocate the variable in the create routine.
    <LI>  Deallocate the variable in the destroy routines.
    </UL>
  <LI>  Add an alias for the variable to cstate.h and associate it with the
      variable in this typedef.
<P>
  </UL>
 NOTE: While the carmastate_type is public, routines outside of the CARMA module
 should not look at or manuipulate fields of this structure directly. There should
 be CARMASTATE_XXX methods to do anything that is needed with this structure, and
 use of these methods will allow the cstate data type structure to evolve without
 impacting code in the parent model. The contents of the structure had to be made
 public, since the CARMA microphysics rountines are implemented in separate files
 outside of this model; however, logically they are part of the model and are the
 only routines outside of this module that should access fields of this structure
 directly.
</HTML>
